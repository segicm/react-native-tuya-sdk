"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("react-native"),r=new t.NativeEventEmitter(t.NativeModules.TuyaRNEventEmitter);function n(e,t){return r.addListener(e,t)}var o,i=function(e,t){return"".concat(e,"//").concat(t)},a=function(t){var r=JSON.parse(t.schema),n={},o={};return r.forEach((function(e){n[e.id]=e,o[e.code]=e})),e.__assign(e.__assign({},t),{schemaMap:n,productBean:{schemaInfo:{dpCodeSchemaMap:o}}})},s=t.NativeModules.TuyaActivatorModule,u=t.NativeModules.TuyaBLEActivatorModule,c=t.NativeModules.TuyaBLEScannerModule;function d(){return s.stopConfig()}(o=exports.TuyaActivationType||(exports.TuyaActivationType={})).EZ="TY_EZ",o.AP="TY_AP",o.QR="TY_QR";var v,p=t.NativeModules.TuyaDeviceModule,l={},f=t.NativeModules.TuyaDeviceModule;(v=exports.DeviceListenerType||(exports.DeviceListenerType={})).onDpUpdate="onDpUpdate",v.onRemoved="onRemoved",v.onStatusChanged="onStatusChanged",v.onNetworkStatusChanged="onNetworkStatusChanged",v.onDevInfoUpdate="onDevInfoUpdate",v.onFirmwareUpgradeSuccess="onFirmwareUpgradeSuccess",v.onFirmwareUpgradeFailure="onFirmwareUpgradeFailure",v.onFirmwareUpgradeProgress="onFirmwareUpgradeProgress";var m={},g=t.NativeModules.TuyaHomeModule,h=t.NativeModules.TuyaHomeDataManagerModule,x=t.NativeModules.TuyaHomeManagerModule,_=t.NativeModules.TuyaHomeMemberModule,T=t.NativeModules.TuyaDeviceModule,S=t.NativeModules.TuyaTimerModule,D=t.NativeModules.TuyaUserModule;exports.DEVLISTENER="devListener",exports.GROUPLISTENER="groupListener",exports.HARDWAREUPGRADELISTENER="hardwareUpgradeListener",exports.HOMECHANGE="homeChange",exports.HOMESTATUS="homeStatus",exports.SINGLETRANSFER="SingleTransfer",exports.SUBDEVLISTENER="subDevListener",exports.addDeviceListener=function(e,t,r){var o=e.devId,a=e.type;if(!m[o]){try{f.registerDevListener({devId:o})}catch(e){null==r||r(e)}m[o]=0}var s=n(i("devListener",o),(function(e){e.type===a&&t(e)}));return m[o]++,{remove:function(){s.remove(),m[o]<=1&&f.unRegisterDevListener({devId:o}),m[o]--}}},exports.addEvent=n,exports.addMember=function(e){return _.addMember(e)},exports.addTimerWithTask=function(e){return S.addTimerWithTask(e)},exports.bridge=i,exports.cancelAccount=function(){return D.cancelAccount()},exports.createHome=function(e){return x.createHome(e)},exports.dismissHome=function(e){return g.dismissHome(e)},exports.getActivatorToken=function(e){return s.getActivatorToken(e)},exports.getAllTimerWithDeviceId=function(t){return e.__awaiter(this,void 0,void 0,(function(){var r;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,S.getAllTimerWithDeviceId(t)];case 1:return(r=e.sent()).forEach((function(e){e.timerTaskStatus.open=!!e.timerTaskStatus.open})),[2,r]}}))}))},exports.getCurrentUser=function(){return D.getCurrentUser()},exports.getCurrentWifi=function(e,t){return s.getCurrentWifi({},e,t)},exports.getDataPointStat=function(e){return p.getDataPointStat(e)},exports.getEmailValidateCode=function(e){return D.getEmailValidateCode(e)},exports.getHomeDetail=function(r){var n;return e.__awaiter(this,void 0,void 0,(function(){var o,i;return e.__generator(this,(function(s){switch(s.label){case 0:return[4,g.getHomeDetail(r)];case 1:return o=s.sent(),"ios"===t.Platform.OS&&o.deviceList?(i=null===(n=o.deviceList)||void 0===n?void 0:n.map((function(e){return a(e)})),[2,e.__assign(e.__assign({},o),{deviceList:i})]):[2,o]}}))}))},exports.getOtaInfo=function(e){return T.getOtaInfo(e)},exports.getRegisterEmailValidateCode=function(e){return D.getRegisterEmailValidateCode(e)},exports.getRoomDeviceList=function(e){return h.getRoomDeviceList(e)},exports.getTimerTaskStatusWithDeviceId=function(e){return S.getTimerTaskStatusWithDeviceId(e)},exports.getUser=function(){return D.getUser()},exports.initActivator=function(r){return e.__awaiter(this,void 0,void 0,(function(){var n;return e.__generator(this,(function(e){switch(e.label){case 0:return"ios"!==t.Platform.OS?[3,2]:[4,s.initActivator(r)];case 1:return n=e.sent(),[2,a(n)];case 2:return[2,s.initActivator(r)]}}))}))},exports.initBluetoothDualModeActivator=function(r){return e.__awaiter(this,void 0,void 0,(function(){var n;return e.__generator(this,(function(e){switch(e.label){case 0:return"ios"!==t.Platform.OS?[3,2]:[4,u.initActivator(r)];case 1:return n=e.sent(),[2,a(n)];case 2:return[2,s.initBluetoothDualModeActivator(r)]}}))}))},exports.initBluetoothDualModeActivatorFromScanBean=function(r){return e.__awaiter(this,void 0,void 0,(function(){var n;return e.__generator(this,(function(e){switch(e.label){case 0:return"ios"!==t.Platform.OS?[3,2]:[4,u.initActivator(r)];case 1:return n=e.sent(),[2,a(n)];case 2:return[2,s.initBluetoothDualModeActivatorFromScanBean(r)]}}))}))},exports.joinFamily=function(e){return x.joinFamily(e)},exports.loginOrRegisterWithUid=function(t){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){return[2,D.loginOrRegisterWithUid(t)]}))}))},exports.loginWithEmail=function(e){return D.loginWithEmail(e)},exports.loginWithUid=function(t){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){return[2,D.loginWithUid(t)]}))}))},exports.logout=function(){return D.logout()},exports.openNetworkSettings=function(){return s.openNetworkSettings({})},exports.prepareDeviceBean=a,exports.queryHomeList=function(){return e.__awaiter(this,void 0,void 0,(function(){var r;return e.__generator(this,(function(n){switch(n.label){case 0:return[4,x.queryHomeList()];case 1:return r=n.sent(),"android"===t.Platform.OS&&(r=r.map((function(t){return e.__assign(e.__assign({},t),{dealStatus:t.homeStatus})}))),[2,r]}}))}))},exports.queryMemberList=function(r){return e.__awaiter(this,void 0,void 0,(function(){var n;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,_.queryMemberList(r)];case 1:return n=e.sent(),"android"===t.Platform.OS&&(n=n.map((function(e){return{admin:e.admin,username:e.account,id:e.memberId,dealStatus:e.memberStatus}}))),[2,n]}}))}))},exports.queryRoomList=function(e){return g.queryRoomList(e)},exports.registerAccountWithEmail=function(e){return D.registerAccountWithEmail(e)},exports.registerDevListener=function(e,t,r){p.registerDevListener(e);var o=n(i("devListener",e.devId),(function(e){e.type===t&&r(e)}));l[e.devId]=o},exports.removeAllDeviceListeners=function(){Object.keys(m).forEach((function(e){f.unRegisterDevListener({devId:e}),delete m[e]}))},exports.removeDevice=function(e){return p.removeDevice(e)},exports.removeMember=function(e){return _.removeMember(e)},exports.removeTimerWithTask=function(e){return S.removeTimerWithTask(e)},exports.renameDevice=function(e){return p.renameDevice(e)},exports.resetEmailPassword=function(e){return D.resetEmailPassword(e)},exports.send=function(e){return p.send(e)},exports.sendVerifyCodeWithUserName=function(e){return D.sendVerifyCodeWithUserName(e)},exports.sortRoom=function(e){return g.sortRoom(e)},exports.startBluetoothScan=function(e){return"ios"===t.Platform.OS?c.startBluetoothLEScan():s.startBluetoothScan(e)},exports.startOta=function(e,t,r,o){return T.startOta(e),n(i("hardwareUpgradeListener",e.devId),(function(e){"onSuccess"===e.type?t(e):"onFailure"===e.type?r(e):"onProgress"===e.type&&o(e)}))},exports.startQRActivator=function(r){return e.__awaiter(this,void 0,void 0,(function(){var n;return e.__generator(this,(function(o){switch(o.label){case 0:return"ios"!==t.Platform.OS?[3,2]:[4,s.initActivator(e.__assign(e.__assign({},r),{type:"TY_QR"}))];case 1:return n=o.sent(),[2,a(n)];case 2:return[2,s.startQRActivator(r)]}}))}))},exports.stopConfig=d,exports.stopLePairing=function(){return"ios"===t.Platform.OS?u.stopLePairing():s.stopLeActivation()},exports.stopLeScan=function(){return"ios"===t.Platform.OS?c.stopBluetoothScan():s.stopBluetoothScan()},exports.stopQRActivator=function(){return"ios"===t.Platform.OS?d():s.stopQRActivator()},exports.unRegisterAllDevListeners=function(){for(var e in l)l[e].remove(),p.unRegisterDevListener({devId:e});l={}},exports.updateHome=function(e){return g.updateHome(e)},exports.updateTimerStatusWithTask=function(e){return S.updateTimerStatusWithTask(e)},exports.updateTimerWithTask=function(e){return S.updateTimerWithTask(e)};
//# sourceMappingURL=react-native-tuya.cjs.production.min.js.map
